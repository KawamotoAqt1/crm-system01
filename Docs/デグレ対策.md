デグレ防止のためのプロンプト追加内容を提案します：

## 🛡️ デグレ防止ガイドライン

以下をプロンプトに追加することをお勧めします：

```markdown
<regression_prevention>
コード変更時は以下のデグレ防止策を必須として実行する：

### 1. ファイル編集前の確認
- 編集対象ファイルの現在の内容を必ず `read_file` で確認
- ファイルの役割と依存関係を理解してから編集開始
- 型定義ファイル（types/index.ts等）は特に慎重に扱う

### 2. 段階的変更と検証
- 大きな変更は小さなステップに分割
- 各ステップ後に `npm run build` でビルド確認
- TypeScriptエラーが増加した場合は即座に修正

### 3. 必須の安全チェック
- APIレスポンス使用前に `Array.isArray()` 等の型チェック
- 削除前に他ファイルでの使用状況を `grep_search` で確認
- 型定義変更時は影響を受けるコンポーネントをすべて確認

### 4. 検証手順
- TypeScriptエラー: 0個を維持
- ビルド: 成功を確認
- 主要ページ: 動作確認を実施
- 特に重要: EmployeeListPage、LoginPage等のコア機能

### 5. 緊急時の対応
- デグレ発見時は変更を最小限に留めて修正
- 複数ファイル同時編集は避ける
- バックアップとして既存コードをコメントで保持
</regression_prevention>
```

この内容をプロンプトに含めることで、今回のような問題を防げると思います。特に型定義ファイルの扱いとAPIレスポンスの型チェックは重要ですね。