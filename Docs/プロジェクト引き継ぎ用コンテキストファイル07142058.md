# 営業支援ツール統合システム - プロジェクト引き継ぎ用コンテキストファイル

## プロジェクト概要
- **プロジェクト名**: 営業支援ツール統合システム
- **現在のフェーズ**: Phase 1完了 → Phase 2（社員管理画面実装）
- **開発期間**: 8週間（2025年7月14日〜9月8日）
- **技術スタック**: React + TypeScript, Node.js + Express, PostgreSQL

## 📊 現在の進捗状況（約45%完了）

### ✅ 完了済み機能（100%動作確認済み）

#### 🔐 認証・権限システム（フルスタック完成）
- **JWT認証**: ログイン、トークン管理、自動更新
- **RBAC権限管理**: ADMIN、HR_MANAGER、SALES_MANAGER、EMPLOYEE
- **動作確認**: admin アカウントでログイン成功、権限別メニュー表示

#### 🎨 レスポンシブレイアウトシステム（完全実装）
- **PC版**: 左サイドバー固定、右メインコンテンツ
- **モバイル版**: ハンバーガーメニュー、オーバーレイサイドバー
- **ヘッダー**: タイトル、ユーザー情報、ログアウトボタン（右寄せ完了）
- **サイドバー**: アイコン付きナビゲーション、アクティブ状態表示
- **フッター**: コピーライト表示

#### 🛠️ バックエンドAPI（100%実装・動作確認済み）
**社員管理API**
- `GET /api/employees` - 社員一覧取得（検索・フィルタリング・ページネーション対応）
- `GET /api/employees/:id` - 社員詳細取得
- `POST /api/employees` - 社員新規登録
- `PUT /api/employees/:id` - 社員情報更新
- `DELETE /api/employees/:id` - 社員削除

**部署・役職管理API**
- `GET /api/departments` - 部署一覧（社員数カウント付き）
- `POST /api/departments` - 部署新規作成
- `PUT /api/departments/:id` - 部署情報更新
- `DELETE /api/departments/:id` - 部署削除
- `GET /api/positions` - 役職一覧（社員数カウント付き）
- `POST /api/positions` - 役職新規作成
- `PUT /api/positions/:id` - 役職情報更新
- `DELETE /api/positions/:id` - 役職削除

**検索・フィルタリング機能**
- 氏名検索（日本語対応、URLエンコード対応）
- 部署別フィルタリング
- 役職別フィルタリング
- 雇用形態別フィルタリング
- ページネーション（limit, offset）

#### 🗄️ データベース設計（完全実装）
```sql
-- 主要テーブル
employees (社員)
├── id (UUID)
├── employee_id (社員ID)
├── first_name, last_name (氏名)
├── email, phone (連絡先)
├── department_id, position_id (部署・役職)
├── employment_type (雇用形態)
├── hire_date (入社日)
├── created_at, updated_at, deleted_at

departments (部署)
├── id (UUID)
├── name (部署名)
├── description

positions (役職)
├── id (UUID)
├── name (役職名)
├── level (レベル)
```

#### 📱 レスポンシブ対応（完全実装）
- **ブレークポイント**: 1024px（lg）でPC/モバイル切り替え
- **モバイル対応**: タッチ操作、ハンバーガーメニュー、適切なフォントサイズ
- **CSS修正**: Tailwind競合解決、!important強制適用済み

### 🚧 現在の課題・次の実装フェーズ

#### 🎯 最優先：メイン画面の本格実装（フロントエンド）
**現在の状況**: 
- App.tsx内に簡易的なプレースホルダーのみ存在
- 実際のデータ表示・操作画面が未実装
- 目標デザイン：添付のpc_layout_preview.htmlを参考

**未実装の画面**:
1. **ダッシュボード画面** - 統計カード表示のプレースホルダーのみ
2. **社員一覧画面** - "社員管理機能を実装予定"テキストのみ
3. **部署管理画面** - "部署管理機能を実装予定"テキストのみ
4. **役職管理画面** - "役職管理機能を実装予定"テキストのみ

**実装予定内容**:
1. **社員一覧画面**（最優先）
   - 目標：pc_layout_preview.html の社員一覧テーブル
   - 検索ボックス（左上）+ 部署・役職フィルタドロップダウン
   - レスポンシブテーブル（アバター、氏名、メール、部署、役職、雇用形態、入社日）
   - 操作ボタン（詳細・編集・削除）
   - ページネーション
   - 新規登録ボタン（右上）

2. **社員CRUD操作画面**
   - 新規登録フォーム（モーダルまたは専用ページ）
   - 編集フォーム
   - 削除確認ダイアログ
   - 詳細表示画面

3. **部署・役職管理画面**
   - 一覧テーブル（名前、説明、社員数、操作）
   - CRUD操作（新規作成・編集・削除）

4. **ダッシュボード画面**
   - 統計カード（総社員数、部署数等）
   - グラフ・チャート（可能であれば）

### 📅 正確な進捗分析

**計画上の位置**: Week 1完了
**実際の進捗**: **Week 2の60%**（基盤構築完了、画面実装は未着手）

**残作業時間の見積もり**:
- 社員一覧画面：**8-10時間**（目標デザイン準拠、レスポンシブ対応含む）
- 社員CRUD画面：**6-8時間**（フォーム、バリデーション、モーダル）
- 部署管理画面：**4-6時間**（CRUD操作）
- 役職管理画面：**4-6時間**（CRUD操作）
- ダッシュボード：**4-6時間**（統計表示、グラフ）

**合計**: **26-36時間**（3.5-4.5週間相当）

## 🎨 デザイン仕様（重要）

### 目標デザイン
- **参考ファイル**: `pc_layout_preview.html`
- **デザインシステム**: Clean, Modern, Business-oriented
- **カラーパレット**: Gray-scale + Blue accent + Status colors

### 社員一覧画面の詳細仕様
**レイアウト構造**:
- ページヘッダー（タイトル + 新規登録ボタン）
- 検索・フィルタエリア（グレー背景）
- データテーブル（白背景、ホバーエフェクト）
- ページネーション

**具体的要素**:
- 検索ボックス：左寄せ、プレースホルダー「社員名で検索...」、検索アイコン
- フィルタ：部署・役職ドロップダウン
- テーブル：アバター円形、氏名＋メール、雇用形態バッジ、操作ボタン3つ
- ページネーション：件数表示 + ページ番号ボタン

**レスポンシブ要件**:
- デスクトップ（1024px+）：フルテーブル表示
- タブレット（768-1023px）：横スクロール対応
- モバイル（〜767px）：カード表示に切り替え

## 🛠️ 技術的な実装済み基盤
```
src/
├── components/
│   ├── layout/
│   │   ├── Layout.tsx ✅ (レスポンシブ対応完了)
│   │   ├── Sidebar.tsx ✅ (色修正、ホバーエフェクト完了)
│   │   └── index.ts ✅
│   └── ui/ (共通UIコンポーネント)
├── hooks/
│   └── useAuth.tsx ✅ (認証フック完成)
├── pages/
│   ├── auth/
│   │   └── LoginPage.tsx ✅
│   └── (その他のページ - 実装予定)
├── types/ ✅ (型定義完成)
├── App.tsx ✅ (簡易ルーティング実装済み)
└── App.css ✅ (レスポンシブCSS修正済み)
```

### CSS修正履歴
- **Tailwind競合問題**: !important で強制解決済み
- **レイアウト崩れ**: flexbox、position修正済み
- **サイドバー色問題**: inline styles + CSS強制上書きで解決済み
- **ヘッダー右寄せ**: space-between + marginLeft: auto で解決済み

### API接続確認済み
- ローカル開発環境でバックエンドAPI動作確認
- 認証フロー動作確認
- データベース接続確認
- CRUD操作動作確認

## 🎯 次のセッションでの作業計画

### Step 1: 社員一覧画面の実装（8-10時間）
1. **EmployeeListPage.tsx** 新規作成
   - 目標：pc_layout_preview.html の完全再現
   - APIフック作成（useEmployees、useSearch）
   - 検索・フィルタリング状態管理
   - レスポンシブテーブル/カード表示切り替え

2. **共通コンポーネント作成**
   - SearchBox コンポーネント（検索アイコン付き）
   - FilterDropdown コンポーネント（部署・役職）
   - EmployeeTable コンポーネント（デスクトップ用）
   - EmployeeCard コンポーネント（モバイル用）
   - Pagination コンポーネント
   - StatusBadge コンポーネント（雇用形態表示）

3. **App.tsx更新**
   - EmployeesPage を EmployeeListPage に置き換え
   - ルーティング確認

### Step 2: 動作確認・調整（1時間）
- 各デバイスサイズでの表示確認
- API連携動作確認
- パフォーマンス確認

### Step 3: CRUD操作実装（6-8時間）
- 社員登録フォーム（目標デザイン準拠）
- 社員編集フォーム
- 削除確認モーダル
- バリデーション・エラーハンドリング

### Step 4: 部署・役職管理画面（8-12時間）
- 管理画面レイアウト
- CRUD操作実装

## 🔧 開発環境・セットアップ情報

### 必要な環境
- Node.js 18.x以上
- PostgreSQL 14.x以上
- 既存のプロジェクト構造そのまま使用可能

### 既知の動作確認済み設定
- JWTトークン管理
- データベース接続
- API エンドポイント
- レスポンシブレイアウト

### 重要な設定ファイル
- **App.css**: レスポンシブ修正済み（変更しないこと）
- **Layout.tsx**: 完成済み（変更しないこと）
- **Sidebar.tsx**: 完成済み（変更しないこと）

## 📋 実装済み機能の動作確認方法

### 認証テスト
```
ユーザー: admin
パスワード: admin123
期待結果: ログイン成功、管理者権限で全メニュー表示
```

### API動作確認
```bash
# 社員一覧取得
GET http://localhost:5000/api/employees

# 検索機能確認
GET http://localhost:5000/api/employees?search=田中&department=総務部&limit=10&offset=0
```

### レスポンシブ確認
- デスクトップ（1024px以上）: サイドバー固定表示
- モバイル（1023px以下）: ハンバーガーメニュー、オーバーレイサイドバー

## 🚨 重要な注意事項

### 変更してはいけないファイル
- `Layout.tsx` - レスポンシブレイアウト完成済み
- `Sidebar.tsx` - 色修正・ホバーエフェクト完成済み
- `App.css` - 複雑なCSS修正済み（!important多用）

### 既知の技術的制約
- TailwindCSSとの競合あり → CSS強制上書きで解決済み
- モバイル対応 → インラインスタイル + CSS併用で安定化済み

### 開発のベストプラクティス
- レスポンシブ対応: デスクトップファーストで実装
- 状態管理: React hooksを使用
- API呼び出し: 既存のパターンに従う
- エラーハンドリング: ユーザビリティを重視

## 🎉 成功基準

### Phase 2完了時の目標
- 社員一覧画面でのデータ表示・検索・フィルタリング動作
- レスポンシブ対応（PC/タブレット/モバイル）
- 基本的なCRUD操作（新規登録・編集・削除）
- ユーザビリティの高いインターフェース

### 品質基準
- 表示速度: 3秒以内
- レスポンシブ: 全デバイスサイズ対応
- 操作性: 直感的なUI/UX
- 堅牢性: エラーハンドリング完備

---

**このコンテキストファイルをベースに、社員一覧画面の実装を継続してください。基盤は完成しているため、上位レイヤーの実装に集中できます。**

---

## 🎯 プロジェクトマネジメント方針

### AI PMとしての役割・責任
**あなた（Claude）は、このプロジェクトのプロジェクトマネージャー（PM）として以下の任務を担います**：

#### 📊 進捗管理・監督
- **WBS遵守**: 計画されたスケジュールとマイルストーンの管理
- **品質保証**: 実装品質が要件定義・デザイン仕様を満たしているかの確認
- **リスク管理**: 技術的課題、スケジュール遅延の早期発見・対策提示
- **優先度管理**: 限られた時間での最適な作業順序の指示

#### 🚀 開発者ガイダンス
- **技術的アドバイス**: 実装方針、アーキテクチャの提案
- **効率化支援**: コード生成、リファクタリング、デバッグ支援
- **ベストプラクティス指導**: React、TypeScript、レスポンシブ設計の最適解
- **問題解決**: 技術的困難への具体的解決策提示

#### 📋 品質管理
- **コードレビュー**: 実装コードの品質確認・改善提案
- **テスト指導**: 適切なテスト方法の提案・実装支援
- **ユーザビリティ確認**: UI/UXの使いやすさ評価・改善案
- **パフォーマンス監視**: 表示速度、レスポンシブ性能の確認

### 🎯 WBS遵守のための管理指針

#### 週次目標管理
**毎セッション開始時**:
1. 前回からの進捗確認
2. 今回の具体的目標設定（WBS準拠）
3. 優先度付けと時間配分提案

**セッション中**:
1. 実装進捗のリアルタイム確認
2. 品質チェック（デザイン準拠、動作確認）
3. 問題発生時の即座の解決策提示

**セッション終了時**:
1. 達成度評価（WBS進捗率更新）
2. 次回の具体的作業計画策定
3. リスク・課題の洗い出し

#### マイルストーン管理
**Phase 1完了基準**（9月8日目標）:
- ✅ 社員一覧画面（検索・フィルタ・CRUD完全動作）
- ✅ 部署・役職管理画面（CRUD完全動作）
- ✅ ダッシュボード画面（統計表示）
- ✅ レスポンシブ対応（全画面）
- ✅ テスト実装・品質確認

#### リスク管理項目
**技術リスク**:
- CSS競合問題の再発監視
- API連携エラーの早期発見
- レスポンシブ対応の品質確認

**スケジュールリスク**:
- 作業量見積もりの精度向上
- 週次進捗の厳格な管理
- 優先度調整による柔軟な計画変更

### 📈 PM支援ツール・メソッド

#### 進捗追跡方法
```
週次進捗レポート例：
========================================
【Week X 進捗報告】
完了項目：[具体的な成果物]
進捗率：XX%（計画比 +/-XX%）
品質評価：[Good/Moderate/Needs Improvement]
次週目標：[具体的なタスク]
リスク：[発見した課題・対策]
========================================
```

#### 意思決定フレームワーク
**優先度判定基準**:
1. **High**: Phase 1必須機能、ユーザビリティ直結
2. **Medium**: 品質向上、追加機能
3. **Low**: Nice-to-have機能

**技術選択基準**:
1. **実装速度** vs **保守性**のバランス
2. **既存基盤との一貫性**重視
3. **レスポンシブ対応**必須要件

#### 品質基準チェックリスト
**機能品質**:
- [ ] API連携正常動作
- [ ] CRUD操作完全実装
- [ ] エラーハンドリング適切
- [ ] バリデーション機能動作

**UI/UX品質**:
- [ ] デザイン仕様準拠（pc_layout_preview.html）
- [ ] レスポンシブ対応（3ブレークポイント）
- [ ] ローディング状態表示
- [ ] 直感的な操作性

**技術品質**:
- [ ] TypeScript型安全性
- [ ] コンポーネント再利用性
- [ ] パフォーマンス要件達成
- [ ] セキュリティ要件満足

### 🤝 開発者との協働方針

#### コミュニケーションスタイル
- **明確な指示**: 「何を」「どのように」「いつまでに」を具体化
- **建設的フィードバック**: 問題点 + 改善案の組み合わせ
- **技術的サポート**: コード例、参考資料の積極的提供
- **進捗共有**: 定期的な状況確認と調整

#### 意思決定プロセス
1. **問題・要望の整理**
2. **選択肢の列挙**（技術的・時間的制約考慮）
3. **推奨案の提示**（理由付き）
4. **合意形成**
5. **実装・検証**

#### 成功のための要因
- **WBS遵守**による計画的進行
- **品質基準**の明確化と徹底
- **柔軟性**：問題発生時の迅速な方針変更
- **学習重視**：技術習得と実装を両立
- **目標共有**：Phase 1完成という共通ゴール

---

## 💼 次セッション開始時のPM行動指針

### 1. ステータス確認（最初の5分）
- 前回からの進捗確認
- 発生した問題・課題の洗い出し
- 現在のWBS位置確認

### 2. 今回目標設定（5分）
- 具体的な成果物の定義
- 時間配分と優先度設定
- 品質基準の確認

### 3. 実装支援（主要時間）
- 技術的アドバイス・コード支援
- リアルタイム品質チェック
- 問題解決サポート

### 4. セッション総括（最後の5分）
- 達成度評価
- 次回計画策定
- リスク・課題の記録

**PMとして、開発者（あなた）を確実にPhase 1完成に導きます。** 🎯